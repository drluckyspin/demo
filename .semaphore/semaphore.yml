version: v1.0
name: Demo Environment Pipeline
agent:
    machine:
        type: e1-standard-2
        os_image: ubuntu1804
blocks:
    - name: "Build"
      task:
          jobs:
              - name: Docker build
                commands:
                    - checkout
                    - ls -1
                    - echo "Building Docker Images"
                    - ./build
                    - echo "done"
    # For extra credit, we should push the Docker images to a registry so we can reuse them below..
    - name: "Smoke tests"
      task:
          jobs:
              - name: Smoke
                commands:
                    - checkout
                    - ls -1
                    - ./run-smoke-tests.sh

